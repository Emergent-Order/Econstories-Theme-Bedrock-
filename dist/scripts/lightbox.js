(function(){jQuery(document).ready(function(t){var e,n,r,o,a,i,l,c,d,h;return console.log("lightbox.coffee loaded"),t("#lightbox-content").featherlight,e=t(".content").find("article"),h="",c="",i="",e.each(function(){var e;return e=t(this).find("h2.entry-title").text(),t(this).on("click",function(){if(t(this).find("a").hasClass("open-lightbox"))return event.preventDefault(),l(e)})}),n=t(".featured").find("article"),n.each(function(){return t(this).on("click",function(){var e;return event.preventDefault(),e=t(this).find(".entry-title").text(),l(e)})}),l=function(e){var n;return n=t.ajax({url:lightboxy.ajax_url,type:"POST",data:{title:e,action:"extra_credit_html"},dataType:"json",success:function(t){return h=t[0],c=t[1],i=t[2]}}).done(r).fail(a).always(d)},r=function(e,n,r){var o,a;return console.log("Data Handled: "+e),console.log("Data Handled: "+n),console.log("Data Handled: "+r),c=t("#lightbox-oembed-container"),o=t("#lightbox-extracredit-container"),a=t("#lightbox-learn-more"),e.length>0&&(c.append(e[1]),e.length>2&&(t("#lightbox-extracredit-container .entry-title").append(e[3]),t("#lightbox-extracredit-container .entry-author").append(e[4]),t("#lightbox-extracredit-container .entry-content").append(e[5]),t("#lightbox-affiliate-url").attr("href",e[6]),e[2]?t("#lightbox-learn-more").append(e[2]):t("#lightbox-learn-more").append("Want to learn more? For extra credit, check out this product on Amazon:"),e[7]&&t("#lightbox-extracredit-container article").addClass("has-econstories-image")),e[6]||t("#lightbox-learn-more").addClass("hide"),e[6]||t("#lightbox-extracredit-container").addClass("hide")),"done"},d=function(){var e;return e=t("[data-remodal-id='lightbox']").remodal(),e.open(),t(document).on("closed","#lightbox-container",function(){return t("#lightbox-content #lightbox-oembed-container").empty(),t("#lightbox-extracredit-container .entry-title").empty(),t("#lightbox-extracredit-container .entry-author").empty(),t("#lightbox-extracredit-container .entry-content").empty(),t("#lightbox-affiliate-url").attr("href",""),t("#lightbox-learn-more").empty(),t("#lightbox-extracredit-container").removeClass("hide"),t("#lightbox-learn-more").removeClass("hide")})},o=function(){},a=function(){return console.log("Something didn't work")}})}).call(this);
//# sourceMappingURL=lightbox.js.map
