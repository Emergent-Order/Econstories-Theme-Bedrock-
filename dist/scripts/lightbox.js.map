{"version":3,"sources":["../assets/scripts/lightbox.js"],"names":["jQuery","document","ready","$","$articles","$featuredArticles","appendLightbox","deleteAllThings","errorFunction","extracredit","getPostData","oembed","openLightbox","post","console","log","featherlight","find","each","$title","this","text","on","hasClass","event","preventDefault","req","ajax","url","lightboxy","ajax_url","type","data","title","action","dataType","success","done","fail","always","status","object","extracredit_container","learnmore","length","append","attr","addClass","lightbox","remodal","open","empty","removeClass","call"],"mappings":"CAAA,WACAA,OAAAC,UAAAC,MAAA,SAAAC,GACA,GAAAC,GAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,CA4FA,OA3FAC,SAAAC,IAAA,0BACAZ,EAAA,qBAAAa,aACAZ,EAAAD,EAAA,YAAAc,KAAA,WACAJ,EAAA,GACAF,EAAA,GACAF,EAAA,GACAL,EAAAc,KAAA,WACA,GAAAC,EAEA,OADAA,GAAAhB,EAAAiB,MAAAH,KAAA,kBAAAI,OACAlB,EAAAiB,MAAAE,GAAA,QAAA,WACA,GAAAnB,EAAAiB,MAAAH,KAAA,KAAAM,SAAA,iBAEA,MADAC,OAAAC,iBACAf,EAAAS,OAIAd,EAAAF,EAAA,aAAAc,KAAA,WACAZ,EAAAa,KAAA,WACA,MAAAf,GAAAiB,MAAAE,GAAA,QAAA,WACA,GAAAH,EAGA,OAFAK,OAAAC,iBACAN,EAAAhB,EAAAiB,MAAAH,KAAA,gBAAAI,OACAX,EAAAS,OAGAT,EAAA,SAAAS,GACA,GAAAO,EACA,OAAAA,GAAAvB,EAAAwB,MACAC,IAAAC,UAAAC,SACAC,KAAA,OACAC,MACAC,MAAAd,EACAe,OAAA,qBAEAC,SAAA,OACAC,QAAA,SAAAJ,GAGA,MAFAnB,GAAAmB,EAAA,GACArB,EAAAqB,EAAA,GACAvB,EAAAuB,EAAA,MAEAK,KAAA/B,GAAAgC,KAAA9B,GAAA+B,OAAA3B,IAEAN,EAAA,SAAA0B,EAAAQ,EAAAC,GACA,GAAAC,GAAAC,CA8BA,OA7BA7B,SAAAC,IAAA,iBAAAiB,GACAlB,QAAAC,IAAA,iBAAAyB,GACA1B,QAAAC,IAAA,iBAAA0B,GACA9B,EAAAR,EAAA,8BACAuC,EAAAvC,EAAA,mCACAwC,EAAAxC,EAAA,wBACA6B,EAAAY,OAAA,IACAjC,EAAAkC,OAAAb,EAAA,IACAA,EAAAY,OAAA,IACAzC,EAAA,gDAAA0C,OAAAb,EAAA,IACA7B,EAAA,iDAAA0C,OAAAb,EAAA,IACA7B,EAAA,kDAAA0C,OAAAb,EAAA,IACA7B,EAAA,2BAAA2C,KAAA,OAAAd,EAAA,IACAA,EAAA,GACA7B,EAAA,wBAAA0C,OAAAb,EAAA,IAEA7B,EAAA,wBAAA0C,OAAA,2EAEAb,EAAA,IACA7B,EAAA,2CAAA4C,SAAA,0BAGAf,EAAA,IACA7B,EAAA,wBAAA4C,SAAA,QAEAf,EAAA,IACA7B,EAAA,mCAAA4C,SAAA,SAGA,QAEAnC,EAAA,WACA,GAAAoC,EAGA,OAFAA,GAAA7C,EAAA,gCAAA8C,UACAD,EAAAE,OACA/C,EAAAF,UAAAqB,GAAA,SAAA,sBAAA,WAQA,MAPAnB,GAAA,gDAAAgD,QACAhD,EAAA,gDAAAgD,QACAhD,EAAA,iDAAAgD,QACAhD,EAAA,kDAAAgD,QACAhD,EAAA,2BAAA2C,KAAA,OAAA,IACA3C,EAAA,wBAAAgD,QACAhD,EAAA,mCAAAiD,YAAA,QACAjD,EAAA,wBAAAiD,YAAA,WAGA7C,EAAA,aACAC,EAAA,WACA,MAAAM,SAAAC,IAAA,8BAIAsC,KAAAjC","file":"lightbox.js","sourcesContent":["(function() {\n  jQuery(document).ready(function($) {\n    var $articles, $featuredArticles, appendLightbox, deleteAllThings, errorFunction, extracredit, getPostData, oembed, openLightbox, post;\n    console.log(\"lightbox.coffee loaded\");\n    $('#lightbox-content').featherlight;\n    $articles = $('.content').find('article');\n    post = \"\";\n    oembed = \"\";\n    extracredit = \"\";\n    $articles.each(function() {\n      var $title;\n      $title = $(this).find('h2.entry-title').text();\n      return $(this).on(\"click\", function() {\n        if ($(this).find('a').hasClass('open-lightbox')) {\n          event.preventDefault();\n          return getPostData($title);\n        }\n      });\n    });\n    $featuredArticles = $('.featured').find('article');\n    $featuredArticles.each(function() {\n      return $(this).on(\"click\", function() {\n        var $title;\n        event.preventDefault();\n        $title = $(this).find('.entry-title').text();\n        return getPostData($title);\n      });\n    });\n    getPostData = function($title) {\n      var req;\n      return req = $.ajax({\n        url: lightboxy.ajax_url,\n        type: 'POST',\n        data: {\n          title: $title,\n          action: 'extra_credit_html'\n        },\n        dataType: 'json',\n        success: function(data) {\n          post = data[0];\n          oembed = data[1];\n          return extracredit = data[2];\n        }\n      }).done(appendLightbox).fail(errorFunction).always(openLightbox);\n    };\n    appendLightbox = function(data, status, object) {\n      var extracredit_container, learnmore;\n      console.log(\"Data Handled: \" + data);\n      console.log(\"Data Handled: \" + status);\n      console.log(\"Data Handled: \" + object);\n      oembed = $(\"#lightbox-oembed-container\");\n      extracredit_container = $(\"#lightbox-extracredit-container\");\n      learnmore = $(\"#lightbox-learn-more\");\n      if (data.length > 0) {\n        oembed.append(data[1]);\n        if (data.length > 2) {\n          $('#lightbox-extracredit-container .entry-title').append(data[3]);\n          $('#lightbox-extracredit-container .entry-author').append(data[4]);\n          $('#lightbox-extracredit-container .entry-content').append(data[5]);\n          $('#lightbox-affiliate-url').attr('href', data[6]);\n          if (data[2]) {\n            $('#lightbox-learn-more').append(data[2]);\n          } else {\n            $('#lightbox-learn-more').append(\"Want to learn more? For extra credit, check out this product on Amazon:\");\n          }\n          if (data[7]) {\n            $('#lightbox-extracredit-container article').addClass(\"has-econstories-image\");\n          }\n        }\n        if (!data[6]) {\n          $('#lightbox-learn-more').addClass(\"hide\");\n        }\n        if (!data[6]) {\n          $('#lightbox-extracredit-container').addClass(\"hide\");\n        }\n      }\n      return \"done\";\n    };\n    openLightbox = function() {\n      var lightbox;\n      lightbox = $(\"[data-remodal-id='lightbox']\").remodal();\n      lightbox.open();\n      return $(document).on('closed', '#lightbox-container', function() {\n        $('#lightbox-content #lightbox-oembed-container').empty();\n        $('#lightbox-extracredit-container .entry-title').empty();\n        $('#lightbox-extracredit-container .entry-author').empty();\n        $('#lightbox-extracredit-container .entry-content').empty();\n        $('#lightbox-affiliate-url').attr('href', \"\");\n        $('#lightbox-learn-more').empty();\n        $('#lightbox-extracredit-container').removeClass(\"hide\");\n        return $('#lightbox-learn-more').removeClass(\"hide\");\n      });\n    };\n    deleteAllThings = function() {};\n    return errorFunction = function() {\n      return console.log(\"Something didn't work\");\n    };\n  });\n\n}).call(this);\n"],"sourceRoot":"assets/scripts/"}